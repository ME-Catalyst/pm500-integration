<svg xmlns="http://www.w3.org/2000/svg" width="820" height="420" viewBox="0 0 820 420" role="img" aria-labelledby="title desc">
  <title id="title">Telemetry Command Sequence</title>
  <desc id="desc">Depicts the round-trip sequence between field devices, the edge stack, and cloud services.</desc>
  <style>
    .lifeline { stroke: #9ca3af; stroke-width: 2; stroke-dasharray: 6 6; }
    .actor { font-family: 'Segoe UI', Arial, sans-serif; font-size: 15px; fill: #111827; }
    .message { stroke: #7c3aed; stroke-width: 2.4; marker-end: url(#arrowhead); }
    .label { font-family: 'Segoe UI', Arial, sans-serif; font-size: 14px; fill: #111827; }
    .box { fill: #f9fafb; stroke: #4b5563; stroke-width: 1.5; rx: 6; ry: 6; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto" fill="#7c3aed">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  <g transform="translate(80,40)">
    <text class="actor" x="0" y="0" text-anchor="middle">Field Device</text>
    <line class="lifeline" x1="0" y1="20" x2="0" y2="400" />
  </g>
  <g transform="translate(240,40)">
    <text class="actor" x="0" y="0" text-anchor="middle">PM500 Gateway</text>
    <line class="lifeline" x1="0" y1="20" x2="0" y2="400" />
  </g>
  <g transform="translate(400,40)">
    <text class="actor" x="0" y="0" text-anchor="middle">Node-RED Flow</text>
    <line class="lifeline" x1="0" y1="20" x2="0" y2="400" />
  </g>
  <g transform="translate(560,40)">
    <text class="actor" x="0" y="0" text-anchor="middle">MQTT Broker</text>
    <line class="lifeline" x1="0" y1="20" x2="0" y2="400" />
  </g>
  <g transform="translate(720,40)">
    <text class="actor" x="0" y="0" text-anchor="middle">Cloud Service</text>
    <line class="lifeline" x1="0" y1="20" x2="0" y2="400" />
  </g>
  <g>
    <line class="message" x1="80" y1="120" x2="240" y2="120" />
    <text class="label" x="160" y="110" text-anchor="middle">Telemetry frame</text>
    <line class="message" x1="240" y1="160" x2="400" y2="160" />
    <text class="label" x="320" y="150" text-anchor="middle">Normalize payload</text>
    <line class="message" x1="400" y1="200" x2="560" y2="200" />
    <text class="label" x="480" y="190" text-anchor="middle">Publish Sparkplug metric</text>
    <line class="message" x1="560" y1="240" x2="720" y2="240" />
    <text class="label" x="640" y="230" text-anchor="middle">Push update</text>
    <line class="message" x1="720" y1="280" x2="560" y2="280" />
    <text class="label" x="640" y="270" text-anchor="middle">Command acknowledgement</text>
    <line class="message" x1="560" y1="320" x2="400" y2="320" />
    <text class="label" x="480" y="310" text-anchor="middle">Command forward</text>
    <line class="message" x1="400" y1="360" x2="240" y2="360" />
    <text class="label" x="320" y="350" text-anchor="middle">Translate instruction</text>
    <line class="message" x1="240" y1="400" x2="80" y2="400" />
    <text class="label" x="160" y="390" text-anchor="middle">Actuate device</text>
  </g>
</svg>
